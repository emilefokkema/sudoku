<html>
	<head>
		<style>
			body {
				background-color: #000;
			}
			.entry {
				font-family: monospace;
				font-size: 25px;
			}
			.index {
				color: #999;
				width: 300px;
				height: 30 px;
				border-right: 1pt solid #999;
				background-color: #333;
			}
			.number {
				color: #fff;
			}
		</style>
	</head>
<body>
<script src="makeNode.js"></script>
<div id="list"></div>
<script>
(function(){
	var nextJuf = (function(){
		var isJuf = function(n){
			return n % 7 == 0 || n.toString().indexOf('7') != -1;
		};
		var index = 0, otherIndex = -1, soFar = [];
		var f = function(){
			var res, other, level, n;
			if(isJuf(++index)){
				other = soFar[++otherIndex];
				n = other.n;
				level = other.level + 1;
			}else{
				n = index;
				level = 0;
			}
			res = {n:n,level:level};
			soFar.push(res);
			return res;
		};
		f.currentIndex = function(){
			return index;
		};
		return f;
	})();
	var fillList = (function(list){
		var addOne = function(){
			var one = nextJuf();
			var div = document.createElement('div');
			div.appendChild(makeNode("<div class='entry'><span class='index'>"+nextJuf.currentIndex()+"</span><span class='number'>"+one.n+"</span></div>"));
			list.appendChild(div);
		};
		return function(){
			for(var i=0;i<30;i++){addOne();}
			return list.getBoundingClientRect();
		};
	})(document.getElementById("list"));
	var fillScreen = (function(){
		var currentHeight = 0;
		return function(){
			while(currentHeight < window.scrollY + window.innerHeight + 500){
				currentHeight = fillList().bottom;
			}
		};
	})();
	setInterval(fillScreen, 200);
})();
</script>
</body>
</html>